# 设计

## 持久化

当保存备注时，会获取`当前文件`相对`项目根路径`的**相对路径**.

例如以 `/opt/project` 作为项目根路径(即 IDEA 打开项目的路径)，给文件 `/opt/project/src/hello.java` 创建备注时，相对路径就是 
`src/hello.java`. 此时，会给 `/opt/project` 这个路径创建一个数据库并保存相关备注。

后面再次打开 `hello.java` 时，会用 `src/hello.java` 从本地数据库中搜索。

---

问题：父工程套子工程，单独开子工程就看不到备注了。

解法：允许创建一个子根路径，该目录中的所有文件备注数据使用单独的数据库(还需考虑，可能会提高上手难度)。

---

问题：三方依赖的备注如何考虑复用

解法(暂定)：允许指定一个回退数据库，当依据根路径找不到备注时，使用回退数据查找。
